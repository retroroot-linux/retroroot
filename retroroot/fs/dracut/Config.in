config BR2_TARGET_ROOTFS_DRACUT
	bool "dracut initramfs"
	depends on !BR2_STATIC_LIBS # dracut -> kmod
	depends on BR2_PACKAGE_HAS_UDEV # dracut -> runtime
	depends on BR2_PACKAGE_BASH # dracut -> runtime
	select BR2_PACKAGE_DRACUT
	help
	  Build a initramfs using dracut

	  https://github.com/dracutdevs/dracut

if BR2_TARGET_ROOTFS_DRACUT

config BR2_PACKAGE_ROOTFS_KERNEL_MODULES
	string "Kernel modules to include"
	help
	  Space seperated list of kernel modules of which to include

config BR2_PACKAGE_ROOTFS_DRACUT_MODULES
	string "Additional modules"
	help
	  Space seperated list of additional dracut modules of which to
	  install. A full list of modules can be found in the modules.d
	  directory of the dracut source code.

config BR2_PACKAGE_ROOTFS_DRACUT_HOST_ONLY
	bool "Host only build"
	help
	  Host-Only mode: Install only what is needed for booting the
	  local host instead of a generic host and generate
	  host-specific configuration. This can greatly reduce the size
	  of the image, but won't work on as many systems out of the
	  box.

	  Select this option if you are building for a specific hardware
	  platform and not a generic PC.

config BR2_PACKAGE_ROOTFS_DRACUT_MOD_SIG
	bool "Module signing support"
	help
	  Select this if your kernel modules are signed.

config BR2_PACKAGE_ROOTFS_DRACUT_PLYMOUTH
	bool "plymouth support"
	depends on BR2_TOOLCHAIN_HAS_THREADS # plymouth -> dbus
	depends on BR2_USE_MMU # plymouth -> dbus
	select BR2_PACKAGE_PLYMOUTH
	help
	  plymouth support

comment "plymouth support needs udev and a toolchain w/ threads, mmu"
	depends on !BR2_PACKAGE_HAS_UDEV
	depends on BR2_STATIC_LIBS

endif

comment "dracut requires bash"
	depends on !BR2_PACKAGE_BASH

comment "dracut needs udev and a toolchain w/ dynamic library"
	depends on !BR2_PACKAGE_HAS_UDEV || BR2_STATIC_LIBS
